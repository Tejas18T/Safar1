package Repository;

import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.stereotype.Repository;

import Entity.Trips_Package;
import jakarta.transaction.Transactional;

@Repository
public interface Trips_Package_Repository extends JpaRepository< Trips_Package, Integer> {

	//for delete package and keep delete packages info
	@Modifying
	@Query("update Trips_Package set package_status=0 where packageid= :p_id")
	public int delet_epackage(int p_id);
	
	
	 @Query("SELECT t from  Trips_Package t where t.company_id = (SELECT c.company_id FROM Company c WHERE c.user_id.user_id = :userid)")
	public List<Trips_Package> getallPackagesbyComid(int userid);

	@Query("SELECT t from Trips_Package t  where packageid= :packageid")
	public Trips_Package findPackage(int packageid);

	@Modifying
	@Query("update Trips_Package set package_name=:package_name, description=:description, source=:source,destination=:destination,person_per_package=:person_per_package,image_desc=:image_desc where packageid= :package_id")
	public int updatePack(int package_id, String package_name, String source, String image_desc, String description,
			float person_per_package, String destination);




	   
	   
}

